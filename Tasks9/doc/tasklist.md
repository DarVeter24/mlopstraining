# План разработки MLOps сервиса для развертывания ML-модели

## Прогресс выполнения

- **Итерация 1:** ✅ Завершена
- **Итерация 2:** ✅ Завершена
- **Итерация 3:** ✅ Завершена
- **Итерация 4:** ✅ Завершена
- **Итерация 5:** ✅ Завершена

---

## Итерация 1: Базовая инфраструктура и загрузка модели
- [x] Настройка окружения с uv
- [x] Создание базовой структуры проекта согласно [@vision.md](./vision.md)
- [x] Настройка конфиг файла .env
- [x] Создание скрипта загрузки модели из MLflow напрямую в память
- [x] Тестирование загрузки модели в память и кэширования
- [x] Создание базового FastAPI приложения

**Критерии тестирования:**
- Модель успешно загружается из MLflow напрямую в память ✅
- Модель кэшируется в памяти для быстрого доступа ✅
- Модель корректно выполняет предсказания fraud detection ✅
- FastAPI сервер запускается без ошибок ✅
- Система работает без зависимости от локальных файлов модели ✅

---

## Итерация 2: REST API для предсказаний
- [x] Создание API эндпоинта для предсказания мошенничества
- [x] Создание Health Check эндпоинта
- [x] Реализация загрузки модели при старте сервиса
- [x] Создание схем данных для входных и выходных данных
- [x] Реализация предобработки входных данных
- [x] Обработка ошибок и валидация данных
- [x] Тестирование API эндпоинтов

**Критерии тестирования:**
- POST /predict возвращает корректные предсказания ✅
- GET /health возвращает статус сервиса ✅
- Валидация входных данных работает ✅
- Обработка ошибок функционирует ✅

---

## Итерация 3: Контейнеризация
- [x] Создание Dockerfile для приложения
- [x] Настройка requirements.txt с зависимостями
- [x] Создание docker-compose.yml для локального тестирования
- [x] Оптимизация размера Docker образа
- [x] Тестирование работы в контейнере (РЕАЛЬНО ВЫПОЛНЕНО ✅)

**Критерии тестирования:**
- Docker образ собирается без ошибок ✅
- Приложение работает в контейнере ✅
- API доступно через Docker ✅

---

## Итерация 4: CI/CD Pipeline
- [x] Создание GitHub Actions workflow
- [x] Настройка автоматических тестов
- [x] Конфигурация сборки Docker образа
- [x] Настройка публикации в Container Registry
- [x] Тестирование CI/CD процесса

**Критерии тестирования:**
- Тесты проходят в CI ✅
- Docker образ публикуется в registry ✅
- Pipeline выполняется без ошибок ✅

---

## Итерация 5: Kubernetes и ArgoCD деплой
- [x] Создание Kubernetes манифестов (Deployment, Service, Ingress)
- [x] Настройка ArgoCD Application
- [x] Конфигурация ConfigMap для переменных окружения
- [x] Настройка автоматического деплоя через GitOps
- [x] Создание HPA для автомасштабирования
- [x] Тестирование работы в Kubernetes кластере
- [x] Создание скриптов для автоматизации тестирования
- [x] Создание подробной документации

**Критерии тестирования:**
- Приложение развертывается в Kubernetes ✅
- ArgoCD синхронизирует изменения ✅
- API доступно через Ingress ✅
- Система работает стабильно под нагрузкой ✅
- HPA корректно масштабирует поды ✅
- Health checks и мониторинг настроены ✅