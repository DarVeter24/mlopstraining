## Шаг 1: Сформулировать цели антифрод-системы (бизнес-цели):

### Исходя из описания задачи, цели системы такие:
  
1. Сроки реализации: Реализовать первый MVP (минимально жизнеспособный продукт) в течение 3 месяцев и завершить весь проект за 6 месяцев.
2. Точность обнаружения: Достичь уровня точности не хуже, чем у конкурентов (не более 2 мошеннических транзакций на 100).
3. Финансовые потери: Минимизировать ущерб от мошенничества, чтобы потери были ≤ 500 тыс. руб. в месяц (как у конкурентов или лучше). 
4. Ложные срабатывания: Ограничить долю ложных срабатываний (ошибочно заблокированных транзакций) не более 5%.
5. Ресурсы: Использовать внешние вычислительные ресурсы (облачные решения), так как свои ресурсы использовать не готовы.
6. Конфиденциальность: Обеспечить защиту и конфиденциальность данных клиентов при работе с системой.

## Шаг 2: Выбрать подходящую метрику машинного обучения:

В антифрод-системах есть следущющие значения:

- **TP (True Positive)** — верно распознано мошенничество.
- **FP (False Positive)** — ложно распознано мошенничество (ошибочно заблокированные транзакции).
- **FN (False Negative)** — пропущенное мошенничество.
- **TN (True Negative)** — верно распознано отсутствие мошенничества.

Важно минимизировать два типа ошибок:

- **False Negative (FN)** – пропуск мошеннической транзакции (самое нежелательное, так как это прямой ущерб).
- **False Positive (FP)** – корректную транзакцию пометили мошеннической (повышает недовольство клиентов).
FN более критичны, чем FP, потому что несут прямой ущерб.

### Наиболее подходящие метрики:
- **Recall (чувствительность)** – доля верно определённых мошеннических операций от всех реальных мошеннических операций.  
- **Precision (точность)** – доля верно определённых мошеннических операций от всех помеченных моделью как мошеннические.
- **F1-score** –  гармоническое среднее между Precision и Recall.

### Оптимальный выбор:

Приоритетная метрика Recall ≥ 98%, поскольку пропущенные мошеннические операции напрямую влияют на финансовый ущерб, также необходимо контролировать Precision ≥ 29% и F1-score ≥ 44% для контроля FP ≤ 5% и баланса точности системы.

### Расчет:

Recall ≥ 98% Максимум 2 мошеннические транзакции из 100 проходят незамеченными.
Precision ≥ 29% Из каждых 100 транзакций до 2 мошеннические и до 5 ошибочно помечены то есть из 7 подозрительных операций не менее 2 должны быть верными подозрениями. Precision = TP / (FP+TP) ​= 2 / (5+2) ​= 0.2857 ≈ 28.6%
F1-score ≥ 44% Гармоническое среднее между Precision ≥ 29% и Recall ≥ 98%. F1-score = 2 × ((Precision × Recall) / (Precision + Recall)) ≈ 44%
Финансовый ущерб ≤ 500 тыс. руб./месяц Потери не должны превышать уровень конкурентов (500 тыс. руб. в месяц).
FP ≤ 5% Не более 5 транзакций из 100 могут быть ошибочно заблокированы


### Шаг 3: Проанализируй специфику проекта через MISSION Canvas

**Цель (Purpose)**  
Снизить потери от мошенничества, обеспечить конкурентоспособность, защитить и сохранить лояльность клиентов.

**Результат (Deliverables)**
	- MVP за 3 месяца, итоговая система за 6 месяцев.
	- Метрики успеха: Recall ≥ 98%, Precision ≥ 29%, FP ≤ 5%, F1-score ≥ 44%, финансовый ущерб не более 500 тыс. руб./месяц.

**Польза (Benefits)**  
Снижение убытков, повышение доверия, снижение оттока  клиентов.

**Клиенты (Customers)**  
Пользователи банковских онлайн-платежей, служба безопасности банка, руководство банка.

**Ресурсы (Resources)**  
Бюджет ≤ 10 млн руб., внешние облачные решения.

**Риски (Risks)**:
- Недостижение целевых метрик.
- Утечка персональных данных.
-  Высокие затраты на облачные вычисления.
- Не корректная настройка балансировки нагрузки на инфраструктуру при обработки высоких пиковых нагрузок (до 400 транзакций в секунду перед праздниками).

**Команда (Team)**  
Data Scientist, ML-инженер, MLOps/DevOps-инженер, Аналитик.

**Инфрастуктура**  
Облачные сервисы (AWS, Azure, Yandex Cloud, SberCloud), стек (Kubernetes, Kafka, MLflow, Airflow, Spark и др.).

### Шаг 4: Декомпозиция планируемой системы на функциональные части

**1. Сбор и хранение данных**
- **Data Ingestion**:  
    Сбор данных о транзакциях в реальном времени с минимальной задержкой. Cохранение транзакций в CSV-файлах.
- **Data Storage**:  
    Безопасное хранение данных о транзакциях с применением шифрования. Обеспечение конфиденциальности персональных данных клиентов и соответствие требованиям внутренней политики безопасности.

**2. Подготовка данных**
- **Data Preprocessing**:  
    Предобработка данных: очистка от пропусков, устранение ошибок, нормализация признаков. Создание обучающих и тестовых выборок с акцентом на минимизацию пропусков мошеннических операций (обеспечение целевого **Recall ≥98%**).
- **Feature Engineering**:  
    Выделение значимых признаков, повышающих способность модели выявлять мошеннические транзакции. Конструирование новых признаков для повышения точности и уменьшения ложных срабатываний (целевая доля **FP ≤5%**).
    
**3. Model Developmen Разработка и обучение модели**
    Обучение и тестирование моделей машинного обучения. Оптимизация по метрике **Recall** (целевое значение ≥98%) при контроле **Precision** и уровня ложных срабатываний.

**4. Model Deployment Развертывание и инференс в реальном времени**
    Развертывание обученной модели в продакшн-окружении с поддержкой обработки транзакций при высоких пиковых нагрузок (до 400 транзакций в секунду перед праздниками)

**5. Monitoring & Maintenance Мониторинг качества модели и сопровождение**
    Непрерывный мониторинг ключевых показателей качества модели (Recall, Precision, FP Rate). Настройка автоматических алертов при снижении производительности модели. Регулярное переобучение на новых данных для поддержания качества на уровне требований.

**6. Security Безопасность и защита данных**
    Реализация комплексных мер безопасности: шифрование данных при хранении и передаче, контроль доступа к конфиденциальной информации, аудит действий с данными. Гарантия соответствия законодательным и внутренним требованиям безопасности.


### Шаг 5: Определение задач по принципу S.M.A.R.T.

- **S (Specific — Конкретные задачи)**:  
    - Настроить сбор данных о транзакциях в реальном времени.    
    - Разработать систему безопасного хранения данных.    
    - Построить пайплайн предобработки и подготовки данных.    
    - Обучить первую версию модели с достижением Recall ≥98%.    
    - Развернуть модель в облачной инфраструктуре для real-time inference.    
    - Настроить систему мониторинга качества модели.
        
- **M (Measurable — Измеримость)**:
    - Обработка не менее 400 транзакций в секунду.    
    - 100% шифроваение данных при хранении и передаче.    
    - Полная очистка и нормализация данных без пропущенных значений.    
    - Метрики успеха: Recall ≥ 98%, Precision ≥ 29%, FP ≤ 5%, F1-score ≥ 44%, финансовый ущерб не более 500 тыс. руб./месяц 
    - Время ответа модели не более 1 секунды.   
    - Мониторинг ключевых метрик на каждые 1000 транзакций.
        
- **A (Achievable — Достижимость)**:
    - Использование решений: Облачные сервисы (AWS, Azure, Yandex Cloud, SberCloud), стек (Kubernetes, Kafka, MLflow, Airflow, Spark и др.).    
    - Применение проверенных подходов к разработке ML и MLOps.
    - Создание необходимой команды Data Scientist, ML-инженер, MLOps/DevOps-инженер, Аналитик и т.д.
        
- **R (Relevant — Актуальность)**:
    - Все задачи направлены на построение конкурентоспособной антифрод-системы, соответствующей бизнес-требованиям: защита от мошенничества, сохранение лояльности клиентов, соответствие нормативам безопасности.
        
- **T (Time-bound — Ограниченность во времени)**:
    - Все задачи должны быть реализованы в рамках MVP за 3 месяца,  с полным завершением проекта — в течение 6 месяцев.